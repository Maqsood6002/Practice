<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>TodoList - CodeWithHarry</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css"
    integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
    <style>
      *{
          margin: 0;
      }
      table{
          width: 1000px;
          text-align: left;
          border-collapse: collapse;
      }
      table ,thead,tbody,td{
          border: 1px solid black;
          margin-left: 15%;
      }
      thead,tbody{
          padding: 10px;
      }
      tr{
          margin-left: 10%;
      }
      h1{
          text-align: center;
      }
      label{
          margin: 10px;
          margin-left: 25%;
      }
      input{
          margin: 10px;
          margin-left: 25%;
          width: 44%;
      }
      textarea{
          margin: 10px;
          margin-left: 25%;
      }
      button{
          margin: 10px;
          margin-left: 25%;
      }
  </style>
  </head>

<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-light">
    <a class="navbar-brand" href="#">Todo</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav mr-auto">
        <li class="nav-item active">
          <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">About</a>
        </li>
      </ul>
      <form class="form-inline my-2 my-lg-0">
        <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
      </form>
    </div>
  </nav>

  <div class="container">
    <form>
      <div class="form-group">
        <label for="title">Todo Title</label>
        <input type="text" class="form-control" id="title" aria-describedby="emailHelp">
      </div>
      <div class="form-group">
        <label for="desc">Todo Desc</label>
        <input type="text" class="form-control" id="desc">
      </div>

      <button id="submit" type="submit" class="btn btn-primary">Submit</button>
    </form>
    <table>
      <thead>
          <tr>
              <th>S.No</th>
              <th>Item</th>
              <th>Discription</th>
          </tr>
      </thead>
      <tbody id="tablebody">
          <tr>
              <th scope="row">1</th>
              <td>item</td>
              <td>description</td>
              <td><button type="button" id="mybtn1" onclick="deleted()">-</button></td>
          </tr>
      </tbody>

    </div>
  </div>
  <script>
    const submitBtn = document.getElementById("submit");
const title = document.getElementById("title");
const desc = document.getElementById("desc");
const tableBody = document.getElementById("tablebody");

submitBtn.addEventListener("click", (e) => {
  e.preventDefault();

  const title title.value.trim();
  const descValue = desc.trim();

  if (!titleValue || !descValue) {
    alert("Please enter both title and description");
    return;
  }

  const newItem = {
    title: titleValue,
    desc: descValue
  };

  const itemStr = JSON.stringify(newItem);
  localStorage.setItem(itemStr, itemStr);

  const newRow = `
    <tr>
      <th scope="row">${tableBody.children.length + 1}</th>
      <td>${titleValue}</td>
      <td>${descValue}</td>
      <td><button type="button" class="delete-btn">-</button></td>
    </tr>
  `;

  tableBody.insertAdjacentHTML("beforeend", newRow);

  title.value = "";
  desc.value = "";
});

tableBody.addEventListener("click", (e) => {
  if (e.target.matches(".delete-btn")) {
    const row = e.target.closest("tr");
    const itemStr = row.dataset.item;
    localStorage.removeItem(itemStr);
    row.remove();
  }
});

const storedItems = Object.values(localStorage);
storedItems.forEach((itemStr) => {
  const item = JSON.parse(itemStr);
  const newRow = `
    <tr data-item="${itemStr}">
      <th scope="row">${tableBody.children.length + 1}</th>
      <td>${item.title}</td>
      <td>${item.desc}</td>
      <td><button type="button" class="delete-btn">-</button></td>
    </tr>
  `;
  tableBody.insertAdjacentHTML("beforeend", newRow);
});
  </script>
</body>

</html>